<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# tracker

```go
import "github.com/aaronlmathis/gosight-server/internal/tracker"
```

## Index

- [func BuildAgentEventMeta\(agent \*model.Agent\) map\[string\]string](<#BuildAgentEventMeta>)
- [func BuildContainerEventMeta\(c \*model.Container\) map\[string\]string](<#BuildContainerEventMeta>)
- [func NormalizeContainerStatus\(raw string\) string](<#NormalizeContainerStatus>)
- [type CommandQueue](<#CommandQueue>)
- [type EndpointTracker](<#EndpointTracker>)
  - [func NewEndpointTracker\(ctx context.Context, emitter \*events.Emitter, dataStore datastore.DataStore\) \*EndpointTracker](<#NewEndpointTracker>)
  - [func \(t \*EndpointTracker\) CheckAgentStatusesAndEmitEvents\(\)](<#EndpointTracker.CheckAgentStatusesAndEmitEvents>)
  - [func \(t \*EndpointTracker\) CheckContainerStatusesAndEmit\(\)](<#EndpointTracker.CheckContainerStatusesAndEmit>)
  - [func \(t \*EndpointTracker\) DequeueCommand\(agentID string\) \*proto.CommandRequest](<#EndpointTracker.DequeueCommand>)
  - [func \(t \*EndpointTracker\) EnqueueCommand\(agentID string, cmd \*proto.CommandRequest\) bool](<#EndpointTracker.EnqueueCommand>)
  - [func \(t \*EndpointTracker\) GetAgentMap\(\) map\[string\]model.Agent](<#EndpointTracker.GetAgentMap>)
  - [func \(t \*EndpointTracker\) GetAgentSession\(agentID string\) \(\*LiveAgentSession, bool\)](<#EndpointTracker.GetAgentSession>)
  - [func \(t \*EndpointTracker\) GetAgents\(\) \[\]model.Agent](<#EndpointTracker.GetAgents>)
  - [func \(t \*EndpointTracker\) GetEndpointIdByAgentId\(agentID string\) \(string, bool\)](<#EndpointTracker.GetEndpointIdByAgentId>)
  - [func \(t \*EndpointTracker\) GetLiveAgentIDs\(\) \[\]string](<#EndpointTracker.GetLiveAgentIDs>)
  - [func \(t \*EndpointTracker\) HasLiveSession\(agentID string\) bool](<#EndpointTracker.HasLiveSession>)
  - [func \(t \*EndpointTracker\) IsAgentLive\(agentID string\) bool](<#EndpointTracker.IsAgentLive>)
  - [func \(t \*EndpointTracker\) IsContainerLive\(endpointID string\) bool](<#EndpointTracker.IsContainerLive>)
  - [func \(t \*EndpointTracker\) ListEndpoints\(\) \[\]model.Endpoint](<#EndpointTracker.ListEndpoints>)
  - [func \(t \*EndpointTracker\) RegisterAgentSession\(agentID string, client proto.StreamService\_StreamServer\)](<#EndpointTracker.RegisterAgentSession>)
  - [func \(t \*EndpointTracker\) RemoveAgentSession\(agentID string\)](<#EndpointTracker.RemoveAgentSession>)
  - [func \(t \*EndpointTracker\) SyncToStore\(ctx context.Context, store datastore.DataStore\)](<#EndpointTracker.SyncToStore>)
  - [func \(t \*EndpointTracker\) UpdateAgent\(meta \*model.Meta\)](<#EndpointTracker.UpdateAgent>)
  - [func \(t \*EndpointTracker\) UpdateContainer\(meta \*model.Meta\)](<#EndpointTracker.UpdateContainer>)
- [type LiveAgentSession](<#LiveAgentSession>)


<a name="BuildAgentEventMeta"></a>
## func [BuildAgentEventMeta](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/helpers.go#L43>)

```go
func BuildAgentEventMeta(agent *model.Agent) map[string]string
```



<a name="BuildContainerEventMeta"></a>
## func [BuildContainerEventMeta](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/helpers.go#L66>)

```go
func BuildContainerEventMeta(c *model.Container) map[string]string
```

BuildContainerEventMeta builds a map of container metadata for event tracking. This is used to track container events such as creation, updates, and deletions. The metadata includes various attributes of the container such as container ID, name, image, runtime, status, endpoint ID, and host ID. The function takes a container object as input and returns a map of strings representing the metadata.

<a name="NormalizeContainerStatus"></a>
## func [NormalizeContainerStatus](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/helpers.go#L79>)

```go
func NormalizeContainerStatus(raw string) string
```



<a name="CommandQueue"></a>
## type [CommandQueue](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/commandQueue.go#L29-L31>)



```go
type CommandQueue struct {
    Pending []*proto.CommandRequest
}
```

<a name="EndpointTracker"></a>
## type [EndpointTracker](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L39-L48>)



```go
type EndpointTracker struct {
    // contains filtered or unexported fields
}
```

<a name="NewEndpointTracker"></a>
### func [NewEndpointTracker](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L50>)

```go
func NewEndpointTracker(ctx context.Context, emitter *events.Emitter, dataStore datastore.DataStore) *EndpointTracker
```



<a name="EndpointTracker.CheckAgentStatusesAndEmitEvents"></a>
### func \(\*EndpointTracker\) [CheckAgentStatusesAndEmitEvents](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L384>)

```go
func (t *EndpointTracker) CheckAgentStatusesAndEmitEvents()
```



<a name="EndpointTracker.CheckContainerStatusesAndEmit"></a>
### func \(\*EndpointTracker\) [CheckContainerStatusesAndEmit](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L426>)

```go
func (t *EndpointTracker) CheckContainerStatusesAndEmit()
```



<a name="EndpointTracker.DequeueCommand"></a>
### func \(\*EndpointTracker\) [DequeueCommand](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/commandQueue.go#L60>)

```go
func (t *EndpointTracker) DequeueCommand(agentID string) *proto.CommandRequest
```



<a name="EndpointTracker.EnqueueCommand"></a>
### func \(\*EndpointTracker\) [EnqueueCommand](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/commandQueue.go#L33>)

```go
func (t *EndpointTracker) EnqueueCommand(agentID string, cmd *proto.CommandRequest) bool
```



<a name="EndpointTracker.GetAgentMap"></a>
### func \(\*EndpointTracker\) [GetAgentMap](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L298>)

```go
func (t *EndpointTracker) GetAgentMap() map[string]model.Agent
```



<a name="EndpointTracker.GetAgentSession"></a>
### func \(\*EndpointTracker\) [GetAgentSession](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L70>)

```go
func (t *EndpointTracker) GetAgentSession(agentID string) (*LiveAgentSession, bool)
```

GetAgentSession retrieves a live agent session

<a name="EndpointTracker.GetAgents"></a>
### func \(\*EndpointTracker\) [GetAgents](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L265>)

```go
func (t *EndpointTracker) GetAgents() []model.Agent
```



<a name="EndpointTracker.GetEndpointIdByAgentId"></a>
### func \(\*EndpointTracker\) [GetEndpointIdByAgentId](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L519>)

```go
func (t *EndpointTracker) GetEndpointIdByAgentId(agentID string) (string, bool)
```



<a name="EndpointTracker.GetLiveAgentIDs"></a>
### func \(\*EndpointTracker\) [GetLiveAgentIDs](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L93>)

```go
func (t *EndpointTracker) GetLiveAgentIDs() []string
```



<a name="EndpointTracker.HasLiveSession"></a>
### func \(\*EndpointTracker\) [HasLiveSession](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L86>)

```go
func (t *EndpointTracker) HasLiveSession(agentID string) bool
```

HasLiveSession checks if an agent has a live session

<a name="EndpointTracker.IsAgentLive"></a>
### func \(\*EndpointTracker\) [IsAgentLive](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L469>)

```go
func (t *EndpointTracker) IsAgentLive(agentID string) bool
```



<a name="EndpointTracker.IsContainerLive"></a>
### func \(\*EndpointTracker\) [IsContainerLive](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L479>)

```go
func (t *EndpointTracker) IsContainerLive(endpointID string) bool
```



<a name="EndpointTracker.ListEndpoints"></a>
### func \(\*EndpointTracker\) [ListEndpoints](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L489>)

```go
func (t *EndpointTracker) ListEndpoints() []model.Endpoint
```



<a name="EndpointTracker.RegisterAgentSession"></a>
### func \(\*EndpointTracker\) [RegisterAgentSession](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L39>)

```go
func (t *EndpointTracker) RegisterAgentSession(agentID string, client proto.StreamService_StreamServer)
```

RegisterAgentSession registers a live connected agent

<a name="EndpointTracker.RemoveAgentSession"></a>
### func \(\*EndpointTracker\) [RemoveAgentSession](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L79>)

```go
func (t *EndpointTracker) RemoveAgentSession(agentID string)
```

RemoveAgentSession cleans up after disconnect

<a name="EndpointTracker.SyncToStore"></a>
### func \(\*EndpointTracker\) [SyncToStore](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L339>)

```go
func (t *EndpointTracker) SyncToStore(ctx context.Context, store datastore.DataStore)
```



<a name="EndpointTracker.UpdateAgent"></a>
### func \(\*EndpointTracker\) [UpdateAgent](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L82>)

```go
func (t *EndpointTracker) UpdateAgent(meta *model.Meta)
```



<a name="EndpointTracker.UpdateContainer"></a>
### func \(\*EndpointTracker\) [UpdateContainer](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/endpoint.go#L150>)

```go
func (t *EndpointTracker) UpdateContainer(meta *model.Meta)
```



<a name="LiveAgentSession"></a>
## type [LiveAgentSession](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/tracker/session.go#L31-L36>)



```go
type LiveAgentSession struct {
    Stream        proto.StreamService_StreamServer
    ConnectedAt   time.Time
    LastHeartbeat time.Time
    SendQueue     chan *proto.StreamResponse
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
