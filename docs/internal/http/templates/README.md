<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gosighttemplate

```go
import "github.com/aaronlmathis/gosight-server/internal/http/templates"
```

## Index

- [Variables](<#variables>)
- [func Div\(a, b float64\) float64](<#Div>)
- [func FlattenInstant\(rows \[\]model.MetricRow\) map\[string\]float64](<#FlattenInstant>)
- [func FlattenRange\(rows \[\]model.MetricRow\) map\[string\]\[\]model.MetricPoint](<#FlattenRange>)
- [func FormatUptime\(seconds float64\) string](<#FormatUptime>)
- [func GetMetricNames\(metrics \[\]model.MetricSelector, instantOnly bool\) \[\]string](<#GetMetricNames>)
- [func HasPermission\(userPermissions \[\]string, permission string\) bool](<#HasPermission>)
- [func HasPrefix\(s, prefix string\) bool](<#HasPrefix>)
- [func HumanizeBytes\(b float64\) string](<#HumanizeBytes>)
- [func Marshal\(v interface\{\}\) template.JS](<#Marshal>)
- [func SafeHTML\(s string\) template.HTML](<#SafeHTML>)
- [func Seq\(from, to int\) \[\]int](<#Seq>)
- [func Since\(ts string\) string](<#Since>)
- [type Breadcrumb](<#Breadcrumb>)
- [type GoSightTemplate](<#GoSightTemplate>)
  - [func NewGoSightTemplate\(ctx context.Context, cfg \*config.Config, metricStore metricstore.MetricStore, metricIndex \*metricindex.MetricIndex, userStore userstore.UserStore\) \(\*GoSightTemplate, error\)](<#NewGoSightTemplate>)
  - [func \(t \*GoSightTemplate\) BuildPageData\(user \*usermodel.User, breadcrumbs, labels map\[string\]string, path, title string, meta \*model.Meta, permissions \[\]string\) \*TemplateData](<#GoSightTemplate.BuildPageData>)
  - [func \(t \*GoSightTemplate\) RenderTemplate\(w http.ResponseWriter, layout, page string, data any\) error](<#GoSightTemplate.RenderTemplate>)
- [type TemplateData](<#TemplateData>)


## Variables

<a name="ContainerMetrics"></a>

```go
var ContainerMetrics = []model.MetricSelector{
    {Name: "container.podman.uptime_seconds", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.running", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.cpu_percent", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.mem_usage_bytes", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.mem_limit_bytes", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.net_rx_bytes", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
    {Name: "container.podman.net_tx_bytes", Namespace: "Container", SubNamespace: "Container.Podman", Instant: true},
}
```

<a name="HostMetrics"></a>

```go
var HostMetrics = []model.MetricSelector{
    {Name: "system.cpu.count_physical", Namespace: "System", SubNamespace: "System.CPU", Instant: true},
    {Name: "system.cpu.usage_percent", Namespace: "System", SubNamespace: "System.CPU", Instant: true},
    {Name: "system.cpu.time_user", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_system", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_idle", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_nice", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_guest", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_guest_nice", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_iowait", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_irq", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_softirq", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.time_steal", Namespace: "System", SubNamespace: "System.CPU", Instant: false},
    {Name: "system.cpu.clock_mhz", Namespace: "System", SubNamespace: "System.CPU", Instant: true},
    {Name: "system.cpu.count_logical", Namespace: "System", SubNamespace: "System.CPU", Instant: true},

    {Name: "system.memory.available", Namespace: "System", SubNamespace: "System.Memory", Instant: true},
    {Name: "system.memory.used", Namespace: "System", SubNamespace: "System.Memory", Instant: true},
    {Name: "system.memory.used_percent", Namespace: "System", SubNamespace: "System.Memory", Instant: false},
    {Name: "system.memory.total", Namespace: "System", SubNamespace: "System.Memory", Instant: true},

    {Name: "system.host.procs", Namespace: "System", SubNamespace: "System.Host", Instant: true},
    {Name: "system.host.users_loggedin", Namespace: "System", SubNamespace: "System.Host", Instant: true},
    {Name: "system.host.info", Namespace: "System", SubNamespace: "System.Host", Instant: true},
    {Name: "system.host.uptime", Namespace: "System", SubNamespace: "System.Host", Instant: true},

    {Name: "system.diskio.read_bytes", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.read_time", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.write_time", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.merged_read_count", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.merged_write_count", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.weighted_io", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.read_count", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.write_count", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.write_bytes", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},
    {Name: "system.diskio.io_time", Namespace: "System", SubNamespace: "System.DiskIO", Instant: false},

    {Name: "system.disk.used_percent", Namespace: "System", SubNamespace: "System.Disk", Instant: false},
    {Name: "system.disk.inodes_total", Namespace: "System", SubNamespace: "System.Disk", Instant: true},
    {Name: "system.disk.total", Namespace: "System", SubNamespace: "System.Disk", Instant: true},
    {Name: "system.disk.used", Namespace: "System", SubNamespace: "System.Disk", Instant: true},
    {Name: "system.disk.inodes_used", Namespace: "System", SubNamespace: "System.Disk", Instant: true},
    {Name: "system.disk.inodes_free", Namespace: "System", SubNamespace: "System.Disk", Instant: true},
    {Name: "system.disk.inodes_used_percent", Namespace: "System", SubNamespace: "System.Disk", Instant: false},
    {Name: "system.disk.free", Namespace: "System", SubNamespace: "System.Disk", Instant: true},

    {Name: "system.network.packets_recv", Namespace: "System", SubNamespace: "System.Network", Instant: false},
    {Name: "system.network.err_in", Namespace: "System", SubNamespace: "System.Network", Instant: false},
    {Name: "system.network.err_out", Namespace: "System", SubNamespace: "System.Network", Instant: false},
    {Name: "system.network.bytes_sent", Namespace: "System", SubNamespace: "System.Network", Instant: false},
    {Name: "system.network.bytes_recv", Namespace: "System", SubNamespace: "System.Network", Instant: false},
    {Name: "system.network.packets_sent", Namespace: "System", SubNamespace: "System.Network", Instant: false},
}
```

<a name="Div"></a>
## func [Div](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L82>)

```go
func Div(a, b float64) float64
```

Div performs safe division, returning 0 if the divisor is zero.

<a name="FlattenInstant"></a>
## func [FlattenInstant](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/metrics.go#L93>)

```go
func FlattenInstant(rows []model.MetricRow) map[string]float64
```

FlattenInstant flattens the MetricRows returned by store and makes it usable for template

<a name="FlattenRange"></a>
## func [FlattenRange](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/metrics.go#L103>)

```go
func FlattenRange(rows []model.MetricRow) map[string][]model.MetricPoint
```



<a name="FormatUptime"></a>
## func [FormatUptime](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L63>)

```go
func FormatUptime(seconds float64) string
```



<a name="GetMetricNames"></a>
## func [GetMetricNames](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/metrics.go#L123>)

```go
func GetMetricNames(metrics []model.MetricSelector, instantOnly bool) []string
```



<a name="HasPermission"></a>
## func [HasPermission](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L109>)

```go
func HasPermission(userPermissions []string, permission string) bool
```

HasPermission checks if a user has a specific permission.

<a name="HasPrefix"></a>
## func [HasPrefix](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L118>)

```go
func HasPrefix(s, prefix string) bool
```



<a name="HumanizeBytes"></a>
## func [HumanizeBytes](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L34>)

```go
func HumanizeBytes(b float64) string
```

HumanizeBytes converts a byte size in bytes to a human\-readable string.

<a name="Marshal"></a>
## func [Marshal](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L53>)

```go
func Marshal(v interface{}) template.JS
```

Marshal converts a Go value to a JSON string and returns it as a template.JS type.

<a name="SafeHTML"></a>
## func [SafeHTML](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L106>)

```go
func SafeHTML(s string) template.HTML
```

SafeHTML returns a template.HTML type to safely render HTML content.

<a name="Seq"></a>
## func [Seq](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L73>)

```go
func Seq(from, to int) []int
```

Seq generates a slice of integers from \`from\` to \`to\`, inclusive.

<a name="Since"></a>
## func [Since](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/helpers.go#L90>)

```go
func Since(ts string) string
```

Since calculates the time duration since a given timestamp in seconds.

<a name="Breadcrumb"></a>
## type [Breadcrumb](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L76-L79>)

Breadcrumb represents a single breadcrumb in the navigation trail.

```go
type Breadcrumb struct {
    Label string
    URL   string
}
```

<a name="GoSightTemplate"></a>
## type [GoSightTemplate](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L49-L58>)



```go
type GoSightTemplate struct {
    Cfg *config.Config

    Tmpl *template.Template

    MetricStore metricstore.MetricStore
    MetricIndex *metricindex.MetricIndex
    UserStore   userstore.UserStore
    // contains filtered or unexported fields
}
```

<a name="NewGoSightTemplate"></a>
### func [NewGoSightTemplate](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L83-L88>)

```go
func NewGoSightTemplate(ctx context.Context, cfg *config.Config, metricStore metricstore.MetricStore, metricIndex *metricindex.MetricIndex, userStore userstore.UserStore) (*GoSightTemplate, error)
```



<a name="GoSightTemplate.BuildPageData"></a>
### func \(\*GoSightTemplate\) [BuildPageData](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L197-L198>)

```go
func (t *GoSightTemplate) BuildPageData(user *usermodel.User, breadcrumbs, labels map[string]string, path, title string, meta *model.Meta, permissions []string) *TemplateData
```

BuildPageData constructs the TemplateData for rendering a page.

<a name="GoSightTemplate.RenderTemplate"></a>
### func \(\*GoSightTemplate\) [RenderTemplate](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L244>)

```go
func (t *GoSightTemplate) RenderTemplate(w http.ResponseWriter, layout, page string, data any) error
```

RenderTemplate renders a template with the given layout and page, passing in the provided data.

<a name="TemplateData"></a>
## type [TemplateData](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/http/templates/template.go#L61-L73>)

TemplateData holds the data passed to templates for rendering.

```go
type TemplateData struct {
    Title       string
    User        *usermodel.User
    UserData    usermodel.SafeUser
    Permissions []string
    Metrics     map[string]float64 // TODO: Revaluate need.
    Timeseries  map[string][]model.MetricPoint
    Tags        map[string]string
    Labels      map[string]string
    Meta        *model.Meta
    Breadcrumbs []Breadcrumb
    CurrentPath string
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
