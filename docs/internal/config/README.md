<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# config

```go
import "github.com/aaronlmathis/gosight-server/internal/config"
```

Package config provides configuration loading and management for the GoSight server. It supports loading configuration from a YAML file and allows for environment variable overrides. The configuration includes settings for server address, storage engine, database path, logging, TLS settings, and debug options.

## Index

- [func ApplyEnvOverrides\(cfg \*Config\)](<#ApplyEnvOverrides>)
- [func EnsureDefaultConfig\(path string\) error](<#EnsureDefaultConfig>)
- [type AWSConfig](<#AWSConfig>)
  - [func \(a \*AWSConfig\) ToOAuthConfig\(\) \*oauth2.Config](<#AWSConfig.ToOAuthConfig>)
- [type AlertBufferConfig](<#AlertBufferConfig>)
- [type AzureConfig](<#AzureConfig>)
  - [func \(a \*AzureConfig\) ToOAuthConfig\(\) \*oauth2.Config](<#AzureConfig.ToOAuthConfig>)
- [type BufferEngineConfig](<#BufferEngineConfig>)
- [type Config](<#Config>)
  - [func LoadConfig\(path string\) \(\*Config, error\)](<#LoadConfig>)
- [type DataBufferConfig](<#DataBufferConfig>)
- [type DiskBufferConfig](<#DiskBufferConfig>)
- [type EventBufferConfig](<#EventBufferConfig>)
- [type GitHubConfig](<#GitHubConfig>)
  - [func \(g \*GitHubConfig\) ToOAuthConfig\(\) \*oauth2.Config](<#GitHubConfig.ToOAuthConfig>)
- [type GoogleConfig](<#GoogleConfig>)
  - [func \(g \*GoogleConfig\) ToOAuthConfig\(\) \*oauth2.Config](<#GoogleConfig.ToOAuthConfig>)
- [type LogBufferConfig](<#LogBufferConfig>)
- [type MetricBufferConfig](<#MetricBufferConfig>)
- [type SyslogCollectionConfig](<#SyslogCollectionConfig>)


<a name="ApplyEnvOverrides"></a>
## func [ApplyEnvOverrides](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L212>)

```go
func ApplyEnvOverrides(cfg *Config)
```

ApplyEnvOverrides applies environment variable overrides to the configuration. It checks for specific environment variables and updates the corresponding fields in the Config struct. This allows for dynamic configuration without modifying the YAML file.

<a name="EnsureDefaultConfig"></a>
## func [EnsureDefaultConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/default.go#L35>)

```go
func EnsureDefaultConfig(path string) error
```

EnsureDefaultConfig checks if the default configuration file exists at the specified path.

<a name="AWSConfig"></a>
## type [AWSConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L171-L177>)

AWSConfig represents the configuration for AWS Cognito authentication

```go
type AWSConfig struct {
    Region       string `yaml:"region"`
    UserPoolID   string `yaml:"user_pool_id"`
    ClientID     string `yaml:"client_id"`
    ClientSecret string `yaml:"client_secret"`
    RedirectURI  string `yaml:"redirect_uri"`
}
```

<a name="AWSConfig.ToOAuthConfig"></a>
### func \(\*AWSConfig\) [ToOAuthConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L267>)

```go
func (a *AWSConfig) ToOAuthConfig() *oauth2.Config
```

ToOAuthConfig converts the AWSConfig to an OAuth2 configuration

<a name="AlertBufferConfig"></a>
## type [AlertBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L91-L97>)

AlertBufferConfig is the configuration for the alerts buffer. It includes settings for buffering alerts data before it is sent to the stores

```go
type AlertBufferConfig struct {
    Enabled          bool          `yaml:"enabled"`
    BufferSize       int           `yaml:"buffer_size"`
    FlushInterval    time.Duration `yaml:"flush_interval"`
    DropOnOverflow   bool          `yaml:"drop_on_overflow"`
    RetryFailedFlush bool          `yaml:"retry_failed_flush"`
}
```

<a name="AzureConfig"></a>
## type [AzureConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L180-L185>)

AzureConfig represents the configuration for Azure AD authentication

```go
type AzureConfig struct {
    TenantID     string `yaml:"tenant_id"`
    ClientID     string `yaml:"client_id"`
    ClientSecret string `yaml:"client_secret"`
    RedirectURI  string `yaml:"redirect_uri"`
}
```

<a name="AzureConfig.ToOAuthConfig"></a>
### func \(\*AzureConfig\) [ToOAuthConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L281>)

```go
func (a *AzureConfig) ToOAuthConfig() *oauth2.Config
```

ToOAuthConfig converts the AzureConfig to an OAuth2 configuration

<a name="BufferEngineConfig"></a>
## type [BufferEngineConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L33-L43>)

BufferEngineConfig is the configuration for the buffer engine. It includes settings for metrics, logs, data, events, and alerts buffering. The buffer engine is responsible for buffering data before it is sent to the stores

```go
type BufferEngineConfig struct {
    Enabled              bool               `yaml:"enabled"`
    FlushInterval        time.Duration      `yaml:"flush_interval"`
    ShutdownFlushTimeout time.Duration      `yaml:"shutdown_flush_timeout"`
    MaxWorkers           int                `yaml:"max_workers"`
    Metrics              MetricBufferConfig `yaml:"metrics"`
    Logs                 LogBufferConfig    `yaml:"logs"`
    Data                 DataBufferConfig   `yaml:"data"`
    Events               EventBufferConfig  `yaml:"events"`
    Alerts               AlertBufferConfig  `yaml:"alerts"`
}
```

<a name="Config"></a>
## type [Config](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L43-L147>)

Config represents the configuration structure for the GoSight server. It includes settings for server address, storage engine, database path, logging, TLS settings, and debug options.

```go
type Config struct {
    Server struct {
        GRPCAddr     string        `yaml:"grpc_addr"`
        HTTPAddr     string        `yaml:"http_addr"`
        Environment  string        `yaml:"environment"`
        SyncInterval time.Duration `yaml:"sync_interval" default:"5m"`
    }   `yaml:"server"`

    Logs struct {
        ErrorLogFile  string `yaml:"error_log_file"`
        AppLogFile    string `yaml:"app_log_file"`
        AccessLogFile string `yaml:"access_log_file"`
        DebugLogFile  string `yaml:"debug_log_file"`
        LogLevel      string `yaml:"log_level"`
    }
    Web struct {
        StaticDir     string   `yaml:"static_dir"`
        TemplateDir   string   `yaml:"template_dir"`
        DefaultTitle  string   `yaml:"default_title"`
        AuthProviders []string `yaml:"auth_providers"`
    }   `yaml:"web"`

    TLS struct {
        HttpsCertFile string `yaml:"https_cert_file"`
        HttpsKeyFile  string `yaml:"https_key_file"`
        CertFile      string `yaml:"cert_file"`
        KeyFile       string `yaml:"key_file"`
        ClientCAFile  string `yaml:"client_ca_file"`
    }   `yaml:"tls"`

    Debug struct {
        EnableReflection bool `yaml:"enable_reflection"`
    }   `yaml:"debug"`

    // TODO - split up storage engine configs.
    MetricStore struct {
        Engine        string `yaml:"engine"`
        URL           string `yaml:"url"`
        Workers       int    `yaml:"workers"`
        QueueSize     int    `yaml:"queue_size"`
        BatchSize     int    `yaml:"batch_size"`
        BatchTimeout  int    `yaml:"batch_timeout"`
        BatchRetry    int    `yaml:"batch_retry"`
        BatchInterval int    `yaml:"batch_interval"`
    }   `yaml:"metricstore"`

    LogStore struct {
        Engine        string `yaml:"engine"` // file, victoriametric etc
        Dir           string `yaml:"dir"`
        Url           string `yaml:"url,omitempty"` // optional URL for remote storage
        Workers       int    `yaml:"workers"`
        QueueSize     int    `yaml:"queue_size"`
        BatchSize     int    `yaml:"batch_size"`
        BatchTimeout  int    `yaml:"batch_timeout"`
        BatchRetry    int    `yaml:"batch_retry"`
        BatchInterval int    `yaml:"batch_interval"`
    }

    UserStore struct {
        Engine   string `yaml:"engine"`    // e.g. "postgres", "memory", "ldap"
        DSN      string `yaml:"dsn"`       // e.g. PostgreSQL connection string
        LDAPBase string `yaml:"ldap_base"` // optional: LDAP-specific config
    }   `yaml:"userstore"`

    DataStore struct {
        Engine string `yaml:"engine"`         // "memory", "json", or "postgres"
        Path   string `yaml:"path,omitempty"` // optional path for JSON file
        DSN    string `yaml:"dsn,omitempty"`  // optional DSN for PostgreSQL
    }   `yaml:"datastore"`

    AlertStore struct {
        Engine string `yaml:"engine"`         // "memory", "json", or "postgres"
        Path   string `yaml:"path,omitempty"` // optional path for JSON file
        DSN    string `yaml:"dsn,omitempty"`  // optional DSN for PostgreSQL
    }   `yaml:"alertstore"`

    EventStore struct {
        Engine string `yaml:"engine"`        // "memory", "json", or "postgres"
        Path   string `yaml:"path"`          // optional path for JSON file
        DSN    string `yaml:"dsn,omitempty"` // optional DSN for PostgreSQL
    }   `yaml:"eventstore"`

    RuleStore struct {
        Engine string `yaml:"engine"` // "memory", "json", or "postgres"
        Path   string `yaml:"path"`   // optional path for JSON file
    }   `yaml:"rulestore"`

    RouteStore struct {
        Path string `yaml:"path"` // path for YAML file
    }   `yaml:"routestore"`

    BufferEngine BufferEngineConfig `yaml:"buffer_engine"`

    SyslogCollection SyslogCollectionConfig `yaml:"syslog_collection"`

    Auth struct {
        SSOEnabled bool         `yaml:"sso_enabled"`
        MFASecret  string       `yaml:"mfa_secret_key"`
        JWTSecret  string       `yaml:"jwt_secret"`
        Google     GoogleConfig `yaml:"google"`
        AWS        AWSConfig    `yaml:"aws"`
        Azure      AzureConfig  `yaml:"azure"`
        GitHub     GitHubConfig `yaml:"github"`
    }   `yaml:"auth"`
}
```

<a name="LoadConfig"></a>
### func [LoadConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L196>)

```go
func LoadConfig(path string) (*Config, error)
```

LoadConfig loads the configuration from a YAML file. It returns a Config struct and an error if any occurs during loading.

<a name="DataBufferConfig"></a>
## type [DataBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L70-L78>)

DataBufferConfig is the configuration for the data buffer. It includes settings for buffering data before it is sent to the stores

```go
type DataBufferConfig struct {
    Enabled           bool             `yaml:"enabled"`
    BufferSize        int              `yaml:"buffer_size"`
    FlushInterval     time.Duration    `yaml:"flush_interval"`
    DropOnOverflow    bool             `yaml:"drop_on_overflow"`
    RetryFailedFlush  bool             `yaml:"retry_failed_flush"`
    FlushOnDisconnect bool             `yaml:"flush_on_disconnect"`
    FallbackDisk      DiskBufferConfig `yaml:"fallback_disk"`
}
```

<a name="DiskBufferConfig"></a>
## type [DiskBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L101-L105>)

DiskBufferConfig is the configuration for the disk buffer. It includes settings for buffering data on disk before it is sent to the stores

```go
type DiskBufferConfig struct {
    Enabled       bool   `yaml:"enabled"`
    Path          string `yaml:"path"`
    MaxDiskSizeMB int    `yaml:"max_disk_size_mb"`
}
```

<a name="EventBufferConfig"></a>
## type [EventBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L82-L87>)

EventBufferConfig is the configuration for the events buffer. It includes settings for buffering events data before it is sent to the stores

```go
type EventBufferConfig struct {
    Enabled          bool          `yaml:"enabled"`
    BufferSize       int           `yaml:"buffer_size"`
    FlushInterval    time.Duration `yaml:"flush_interval"`
    RetryFailedFlush bool          `yaml:"retry_failed_flush"`
}
```

<a name="GitHubConfig"></a>
## type [GitHubConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L188-L192>)

GitHubConfig represents the configuration for GitHub OAuth authentication

```go
type GitHubConfig struct {
    ClientID     string `yaml:"client_id"`
    ClientSecret string `yaml:"client_secret"`
    RedirectURI  string `yaml:"redirect_uri"`
}
```

<a name="GitHubConfig.ToOAuthConfig"></a>
### func \(\*GitHubConfig\) [ToOAuthConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L301>)

```go
func (g *GitHubConfig) ToOAuthConfig() *oauth2.Config
```

ToOAuthConfig converts the GitHubConfig to an OAuth2 configuration

<a name="GoogleConfig"></a>
## type [GoogleConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L164-L168>)

GoogleConfig represents the configuration for Google OAuth2 authentication. It includes the client ID, client secret, and redirect URI.

```go
type GoogleConfig struct {
    ClientID     string `yaml:"client_id"`
    ClientSecret string `yaml:"client_secret"`
    RedirectURI  string `yaml:"redirect_uri"`
}
```

<a name="GoogleConfig.ToOAuthConfig"></a>
### func \(\*GoogleConfig\) [ToOAuthConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L256>)

```go
func (g *GoogleConfig) ToOAuthConfig() *oauth2.Config
```

ToOAuthConfig converts the GoogleConfig to an OAuth2 configuration. It sets the client ID, client secret, redirect URI, scopes, and endpoint.

<a name="LogBufferConfig"></a>
## type [LogBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L59-L66>)

LogBufferConfig is the configuration for the logs buffer. It includes settings for buffering logs data before it is sent to the stores

```go
type LogBufferConfig struct {
    Enabled          bool             `yaml:"enabled"`
    BufferSize       int              `yaml:"buffer_size"`
    FlushInterval    time.Duration    `yaml:"flush_interval"`
    DropOnOverflow   bool             `yaml:"drop_on_overflow"`
    RetryFailedFlush bool             `yaml:"retry_failed_flush"`
    FallbackDisk     DiskBufferConfig `yaml:"fallback_disk"`
}
```

<a name="MetricBufferConfig"></a>
## type [MetricBufferConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/bufferConfig.go#L47-L55>)

MetricBufferConfig is the configuration for the metrics buffer. It includes settings for buffering metrics data before it is sent to the stores

```go
type MetricBufferConfig struct {
    Enabled           bool             `yaml:"enabled"`
    BufferSize        int              `yaml:"buffer_size"`
    FlushInterval     time.Duration    `yaml:"flush_interval"`
    DropOnOverflow    bool             `yaml:"drop_on_overflow"`
    RetryFailedFlush  bool             `yaml:"retry_failed_flush"`
    FlushOnDisconnect bool             `yaml:"flush_on_disconnect"`
    FallbackDisk      DiskBufferConfig `yaml:"fallback_disk"`
}
```

<a name="SyslogCollectionConfig"></a>
## type [SyslogCollectionConfig](<https://github.com/aaronlmathis/gosight-server/blob/main/internal/config/config.go#L151-L160>)

SyslogCollectionConfig defines the configuration for syslog collection The syslog collection can be used to collect syslog messages from network devices.

```go
type SyslogCollectionConfig struct {
    TCPEnabled     bool `yaml:"tcp_enabled"`
    UDPEnabled     bool `yaml:"udp_enabled"`
    TCPPort        int  `yaml:"tcp_port"`
    UDPPort        int  `yaml:"udp_port"`
    TCPBufferSize  int  `yaml:"tcp_buffer_size"`
    UDPBufferSize  int  `yaml:"udp_buffer_size"`
    MaxConnections int  `yaml:"max_connections"`
    DefaultIPLimit int  `yaml:"default_ip_limit"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
