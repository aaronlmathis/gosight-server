{{ define "title" }}Dashboard{{ end }} {{ define "content" }}

<section
  class="flex-1 p-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800">
  <!--//<div class="sticky top-0 z-10 bg-white dark:bg-gray-800 shadow-xs">-->
  <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 bg-white dark:bg-gray-800 pt-2 z-10">
    Host: <span class="text-blue-500">hostname123</span>
  </h2>
  <div class="flex items-center justify-between text-sm mb-4">
    <div class="flex items-center space-x-3">
      <span class="text-green-500 font-medium">● Online</span>
      <span class="text-gray-500 dark:text-gray-400">Last report: 3m ago</span>
      <span
        class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300">prod</span>
      <span
        class="bg-gray-100 text-gray-800 text-xs font-semibold px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-white">k8s</span>
    </div>
    <button class="text-sm text-blue-500 hover:underline">↻ Refresh</button>
  </div>
  <!-- Flowbite Tabs -->
  <ul
    class="flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400"
    id="dashboardTabs" data-tabs-toggle="#dashboardTabContent" role="tablist">
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2 active" id="overview-tab" data-tabs-target="#overview"
        type="button" role="tab" aria-controls="overview" aria-selected="true">
        Overview
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="cpu-tab" data-tabs-target="#compute" type="button"
        role="tab" aria-controls="compute" aria-selected="false">
        Compute
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="memory-tab" data-tabs-target="#memory" type="button"
        role="tab" aria-controls="memory" aria-selected="false">
        Memory
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="disk-tab" data-tabs-target="#disk" type="button"
        role="tab" aria-controls="disk" aria-selected="false">
        Disk
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="network-tab" data-tabs-target="#network"
        type="button" role="tab" aria-controls="network" aria-selected="false">
        Network
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="host-tab" data-tabs-target="#host" type="button"
        role="tab" aria-controls="host" aria-selected="false">
        Host Info
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="activity-tab" data-tabs-target="#activity"
        type="button" role="tab" aria-controls="activity" aria-selected="false">
        Activity
      </button>
    </li>
    <li class="mr-2" role="presentation">
      <button class="inline-block p-4 rounded-t-lg border-b-2" id="console-tab" data-tabs-target="#console"
        type="button" role="tab" aria-controls="console" aria-selected="false">
        Console
      </button>
    </li>
  </ul>

  <div id="dashboardTabContent">
    {{ template "overview-tab" . }} {{ template "compute-tab" . }} {{ template
    "memory-tab" . }} {{ template "disk-tab" . }} {{ template "network-tab" . }}
    {{ template "host-tab" . }}{{ template "activity-tab" . }}{{ template
    "console-tab" . }}
  </div>
</section>

{{ end }} {{ define "compute-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="compute" role="tabpanel"
  aria-labelledby="compute-tab">
  <div class="space-y-8">
    <!-- Section Header -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <div class="flex flex-col gap-4">
        <!-- Section: CPU Usage Chart -->
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
            CPU Usage Over Time
          </h3>
          <div class="relative h-48 w-full">
            <canvas id="cpuUsageChart" class="absolute top-0 left-0 w-full h-full"></canvas>
          </div>
        </div>

        <!-- Section: CPU Load Chart -->
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
            CPU Usage Over Time
          </h3>
          <div class="relative h-48 w-full">
            <canvas id="cpuLoadChart" class="absolute top-0 left-0 w-full h-full"></canvas>
          </div>
        </div>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <div class="flex justify-between items-center mb-4">
          <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200">
            CPU Time Breakdown
          </h4>
          <select id="cpu-time-unit"
            class="text-xs border dark:bg-gray-900 border-gray-300 dark:border-gray-700 px-2 py-1 rounded">
            <option value="ticks">Ticks</option>
            <option value="seconds">Seconds</option>
          </select>
        </div>
        <!-- Force a clean height for canvas -->
        <div class="w-full h-64">
          <canvas id="cpuDonutChart" class="w-full h-64"></canvas>
        </div>
      </div>
    </div>

    <div class="grid gap-4 lg:grid-cols-3">
      <!-- CPU Info -->
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200">
          CPU Information
        </h4>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 text-sm text-gray-400">
          <div>Model: Intel(R) Xeon(R) CPU E5-2676 v3</div>
          <div>Vendor ID: GenuineIntel</div>
          <div>Cores: 8</div>
          <div>Threads: 16</div>
          <div>Base Clock: 2.40 GHz</div>
          <div>Cache: 25600 KB</div>
          <div>Family: 6</div>
          <div>Model #: 63</div>
          <div>Stepping: 2</div>
          <div>Microcode: 0x3c</div>
        </div>
      </div>

      <!-- CPU Times -->
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-s">
        <div class="text-base font-semibold text-gray-200 mb-3">
          CPU Time Counters
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 text-sm text-gray-400">
          <div>User: 12458.2s</div>
          <div>System: 9342.8s</div>
          <div>Idle: 98234.5s</div>
          <div>Nice: 15.9s</div>
          <div>Iowait: 123.4s</div>
          <div>IRQ: 4.0s</div>
          <div>SoftIRQ: 8.6s</div>
          <div>Steal: 0.0s</div>
          <div>Guest: 0.0s</div>
          <div>GuestNice: 0.0s</div>
        </div>
      </div>

      <!-- CPU Kernel Stats -->
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-s">
        <div class="text-base font-semibold text-gray-200 mb-3">
          CPU Statistics
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm text-gray-400">
          <div>Context Switches: 1,324,556</div>
          <div>Interrupts: 87,342</div>
          <div>Soft Interrupts: 15,239</div>
          <div>Syscalls: N/A</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Section: Memory Usage Chart -->
  <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
      Memory Usage Over Time
    </h3>
    <div class="relative h-48 w-full">
      <canvas id="memoryUsageChart" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
  </div>

  <!-- Section: Memory Donut + Memory/Swap Stats -->
  <div class="grid gap-4 lg:grid-cols-3">
    <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
      <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">
        Memory Breakdown
      </h4>
      <div class="relative h-48 w-full">
        <canvas id="memoryDonutChart" class="absolute top-0 left-0 w-full h-full"></canvas>
      </div>
    </div>

    <div class="lg:col-span-2 grid grid-cols-2 md:grid-cols-3 gap-4">
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Total Memory</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          32.0
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Used Memory</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          12.4
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Free Memory</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          17.9
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Total Swap</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          4.0
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Used Swap</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          1.8
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Free Swap</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          2.2
        </p>
        <p class="https://*.mrisoftware.com">GB</p>
      </div>
    </div>
  </div>
</div>
</div>
{{ end }} {{ define "cpu-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="cpu" role="tabpanel" aria-labelledby="cpu-tab">
  <div class="space-y-6">
    <!-- CPU Usage Line Chart -->
    <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl p-4 shadow-sm">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300">
          CPU Usage Over Time
        </h3>
        <span class="text-xs text-gray-500 dark:text-gray-400">Auto-refreshing every 2s</span>
      </div>
      <div class="relative h-48 w-full">
        <canvas id="cpuUsageChart" class="absolute top-0 left-0 w-full h-full"></canvas>
      </div>
    </div>

    <!-- Donut + Core Info -->
    <div class="grid gap-4 lg:grid-cols-3">
      <!-- Donut -->
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl p-4 shadow-sm">
        <div class="flex justify-between items-center mb-2">
          <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200">
            CPU Time Breakdown
          </h4>
          <select id="cpu-time-unit"
            class="text-xs border dark:bg-gray-900 border-gray-300 dark:border-gray-700 px-2 py-1 rounded">
            <option value="ticks">Ticks</option>
            <option value="seconds">Seconds</option>
          </select>
        </div>
        <div class="relative h-48 w-full">
          <canvas id="cpuDonutChart" class="absolute top-0 left-0 w-full h-full"></canvas>
        </div>
      </div>

      <!-- Stat Cards -->
      <div class="lg:col-span-2 grid grid-cols-2 md:grid-cols-3 gap-4 min-h-[92px] flex flex-col justify-center">
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Clock Speed</p>
          <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
            3400
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">MHz</p>
        </div>
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            Logical Cores
          </p>
          <p class="text-xl font-bold text-blue-600 dark:text-blue-400">16</p>
          <p class="text-xs text-gray-400 dark:text-gray-500">count</p>
        </div>
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            Physical Cores
          </p>
          <p class="text-xl font-bold text-blue-600 dark:text-blue-400">8</p>
          <p class="text-xs text-gray-400 dark:text-gray-500">count</p>
        </div>
      </div>
    </div>

    <!-- CPU Time Grid -->
    <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-4 mt-6">
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">User Time</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          13400
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">System Time</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">7200</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Idle Time</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">
          28000
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">I/O Wait</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">1800</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">SoftIRQ</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">1300</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">IRQ</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">400</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Steal</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">250</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Nice</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">900</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Guest</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">150</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Guest Nice</p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400">75</p>
        <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
      </div>
    </div>
  </div>
</div>
{{ end }} {{ define "overview-tab" }}

<div class="p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="overview" role="tabpanel" aria-labelledby="overview-tab">
  <!-- Metrics Row: CPU, Memory, Disk (1 row of 3) -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div
      class="relative p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow flex flex-col justify-between h-full">
      <!-- Icon -->
      <div class="absolute top-4 right-4 text-blue-400">
        <!-- Heroicon: Chip / CPU -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 4v1M15 4v1M9 19v1M15 19v1M4 9h1M4 15h1M19 9h1M19 15h1M7 7h10v10H7V7z" />
        </svg>
      </div>
      <p class="text-sm text-gray-500 dark:text-gray-400">CPU Usage</p>
      <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
        23%
      </p>
      <p class="text-xs text-gray-400 dark:text-gray-500">percent</p>
      <div class="mt-2">
        <canvas id="miniCpuChart" class="w-full h-20"></canvas>
      </div>
    </div>

    <div
      class="relative p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md flex flex-col justify-between h-full">
      <!-- Icon -->
      <div class="absolute top-4 right-4 text-green-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 10h16M4 14h16M4 18h16M8 6v12M16 6v12" />
        </svg>
      </div>

      <!-- Content -->
      <p class="text-sm text-gray-500 dark:text-gray-400">Memory Used</p>
      <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
        12.4 GB
      </p>
      <p class="text-xs text-gray-400 dark:text-gray-500">GB</p>
      <div class="mt-2">
        <canvas id="miniMemoryChart" class="w-full h-20"></canvas>
      </div>
    </div>

    <div
      class="relative p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md flex flex-col justify-between h-full">
      <!-- Icon -->
      <div class="absolute top-4 right-4 text-yellow-400">
        <!-- Heroicon: Chip (or use Archive icon for storage) -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M20 12H4M20 12V6a2 2 0 00-2-2H6a2 2 0 00-2 2v6m16 0v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-6" />
        </svg>
      </div>
      <p class="text-sm text-gray-500 dark:text-gray-400">Disk Used</p>
      <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
        320 GB
      </p>
      <p class="text-xs text-gray-400 dark:text-gray-500">GB</p>
      <div class="mt-2">
        <canvas id="miniDiskChart" class="w-full h-20"></canvas>
      </div>
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div
      class="p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm flex flex-col justify-between h-full">
      <h3 class="text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300">
        Recent Events
      </h3>
      <ul class="text-xs space-y-1">
        <li>⚠️ High memory usage exceeded 90%</li>
        <li>✅ Pod restarted successfully</li>
        <li>ℹ️ Sync completed at 12:42 PM</li>
      </ul>
    </div>

    <div
      class="p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm flex flex-col justify-between h-full">
      <p class="text-sm text-gray-500 dark:text-gray-400">Uptime</p>
      <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
        42d 4h
      </p>
      <p class="text-xs text-gray-400 dark:text-gray-500">duration</p>
    </div>

    <div
      class="p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm flex flex-col justify-between h-full">
      <p class="text-sm text-gray-500 dark:text-gray-400">Processes</p>
      <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
        175
      </p>
      <p class="text-xs text-gray-400 dark:text-gray-500">count</p>
    </div>
  </div>

  <div class="mt-8">
    <div class="p-4 sm:p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">Container Endpoints</h2>
        <span class="text-sm text-gray-500 dark:text-gray-400" id="endpoint-count">-- total</span>
      </div>
      <div class="flex flex-wrap gap-4 mb-4">
        <select id="filter-container-status"
          class="text-sm px-3 py-1 rounded border dark:bg-gray-900 border-gray-300 dark:border-gray-700">
          <option value="">All Statuses</option>
          <option value="running">Running</option>
          <option value="stopped">Stopped</option>
        </select>
        <select id="filter-runtime"
          class="text-sm px-3 py-1 rounded border dark:bg-gray-900 border-gray-300 dark:border-gray-700">
          <option value="">All Types</option>
          <option value="podman">Podman</option>
          <option value="docker">Docker</option>
        </select>
        <input id="filter-host" type="text" placeholder="Filter by Host"
          class="text-sm px-3 py-1 rounded border dark:bg-gray-900 border-gray-300 dark:border-gray-700" />
      </div>

      <div class="overflow-x-auto">
        <table class="min-w-full text-sm table-auto border-collapse">
          <thead class="bg-gray-100 dark:bg-gray-700 text-left">
            <tr>
              <th class="px-4 py-2">Name</th>
              <th class="px-4 py-2">Host</th>

              <th class="px-4 py-2">Image</th>
              <th class="px-4 py-2">Status</th>
              <th class="px-4 py-2">CPU %</th>
              <th class="px-4 py-2">Mem</th>
              <th class="px-4 py-2">RX</th>
              <th class="px-4 py-2">TX</th>
              <th class="px-4 py-2">Uptime</th>
            </tr>
          </thead>
          <tbody id="container-table-body" class="divide-y divide-gray-200 dark:divide-gray-700">
            <tr>
              <td class="px-4 py-2">Kassi-Webserver</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">194h 42m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">Test-NGINX</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">45h 2m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">web-server</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">197h 33m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">web-server1</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">197h 31m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">web-server2</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">197h 32m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">web-server3</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100">
                  stopped
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2">—</td>
              <td class="px-4 py-2" title="">197h 32m</td>
            </tr>
            <tr>
              <td class="px-4 py-2">webserver-01</td>
              <td class="px-4 py-2">DeepThought</td>

              <td class="px-4 py-2">docker.io/library/nginx:latest</td>
              <td class="px-4 py-2">
                <span
                  class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                  running
                </span>
              </td>
              <td class="px-4 py-2">0.0%</td>
              <td class="px-4 py-2">10.4 MB</td>
              <td class="px-4 py-2">7.4 KB</td>
              <td class="px-4 py-2">1.2 KB</td>
              <td class="px-4 py-2" title="">2h 5m</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

{{ end }} {{ define "cpu-tabold" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="cpu" role="tabpanel" aria-labelledby="cpu-tab">
  <div class="space-y-6">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
        CPU Usage Overview
      </h3>
      <select id="cpu-range" class="form-select w-48 mt-4 lg:mt-0">
        <option>Last 1h</option>
        <option selected>Last 24h</option>
        <option>Last 7d</option>
        <option>Last 30d</option>
      </select>
    </div>

    <div
      class="relative bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm h-48">
      <canvas id="cpuUsageChart" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>

    <div class="grid gap-4 lg:grid-cols-3 items-start">
      <!-- 2x2 metric cards -->
      <div class="lg:col-span-2 grid gap-4 md:grid-cols-2">
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Clock Speed</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            3400
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">MHz</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            Logical Cores
          </p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            16
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">count</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            Physical Cores
          </p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            8
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">count</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">User Time</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            13400
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">ticks</p>
        </div>
      </div>

      <!-- Donut Chart -->
      <div
        class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm flex flex-col items-center h-full">
        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">
          CPU Time Distribution
        </h4>
        <canvas id="cpuDonutChart" class="w-full h-48 max-w-[240px]"></canvas>
      </div>
    </div>
  </div>
</div>
{{ end }}{{ define "memory-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="memory" role="tabpanel" aria-labelledby="memory-tab">
  <div class="space-y-6">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
        Memory Usage Overview
      </h3>
      <select id="memory-range" class="form-select w-48 mt-4 lg:mt-0">
        <option>Last 1h</option>
        <option selected>Last 24h</option>
        <option>Last 7d</option>
        <option>Last 30d</option>
      </select>
    </div>

    <div
      class="relative bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm h-48">
      <canvas id="memoryUsageChart" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>

    <div class="grid gap-4 lg:grid-cols-3 items-start">
      <div class="lg:col-span-2 grid gap-4 md:grid-cols-2">
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Used Memory</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            12.3 GB
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">Gigabytes</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Total Memory</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            32.0 GB
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">Gigabytes</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Swap Used</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            1.8 GB
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">Gigabytes</p>
        </div>
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
          <p class="text-sm text-gray-500 dark:text-gray-400">Free Memory</p>
          <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
            17.9 GB
          </p>
          <p class="text-xs text-gray-400 dark:text-gray-500">Gigabytes</p>
        </div>
      </div>

      <div
        class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm flex flex-col items-center h-full">
        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2">
          Memory Breakdown
        </h4>
        <canvas id="memoryDonutChart" class="w-full h-48 max-w-[240px]"></canvas>
      </div>
    </div>
  </div>
</div>
{{ end }} {{ define "disk-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="disk" role="tabpanel" aria-labelledby="disk-tab">
  <p class="text-gray-600 dark:text-gray-300">Disk tab coming soon.</p>
</div>
{{ end }} {{ define "network-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="network" role="tabpanel"
  aria-labelledby="network-tab">
  <div class="space-y-6">
    <!-- Section Header -->
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
        Network Overview
      </h3>
      <select id="interface-select"
        class="text-sm mt-4 lg:mt-0 border rounded px-3 py-1 dark:bg-gray-900 border-gray-300 dark:border-gray-700">
        <option value="eth0">eth0</option>
        <option value="wlan0">wlan0</option>
        <option value="lo">lo</option>
      </select>
    </div>

    <!-- Live Delta Row -->
    <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-2">
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">
          Current Bandwidth
        </p>
        <p class="text-xl font-bold text-blue-600 dark:text-blue-400 mt-1">
          ↑ 12.4 Mbps / ↓ 10.2 Mbps
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          eth0 — 1m average
        </p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Peak Bandwidth</p>
        <p class="text-xl font-bold text-yellow-600 dark:text-yellow-400 mt-1">
          ↑ 21.6 Mbps / ↓ 18.3 Mbps
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          Observed in last 10m
        </p>
      </div>
    </div>

    <!-- Bandwidth Chart -->
    <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm h-64">
      <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3">
        Bandwidth Over Time (Mbps)
      </h4>
      <canvas id="networkChart" class="w-full h-full"></canvas>
    </div>
    <!-- Toggle Chart Unit -->
    <div class="flex items-center justify-between mt-8 mb-4">
      <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-200">
        Interface Breakdown
      </h4>
      <div class="flex items-center space-x-4">
        <label class="text-sm text-gray-600 dark:text-gray-400">Chart Unit:</label>
        <select id="chart-unit"
          class="text-sm border rounded px-2 py-1 dark:bg-gray-900 border-gray-300 dark:border-gray-700">
          <option value="mbps">Mbps</option>
          <option value="kbps">KBps</option>
          <option value="bytes">Bytes/sec</option>
        </select>
      </div>
    </div>
    <!-- Packet + Error Stats -->
    <div class="grid gap-4 lg:grid-cols-4">
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Packets Sent</p>
        <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
          18,430
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          system.network.packets_sent
        </p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">
          Packets Received
        </p>
        <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1">
          21,917
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          system.network.packets_recv
        </p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-red-300 dark:border-red-500 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Input Errors</p>
        <p class="text-2xl font-bold text-red-600 dark:text-red-400 mt-1">
          5
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          system.network.err_in
        </p>
      </div>
      <div class="bg-white dark:bg-gray-900 border border-red-300 dark:border-red-500 rounded-lg p-4 shadow-sm">
        <p class="text-sm text-gray-500 dark:text-gray-400">Output Errors</p>
        <p class="text-2xl font-bold text-red-600 dark:text-red-400 mt-1">
          2
        </p>
        <p class="text-xs text-gray-400 dark:text-gray-500">
          system.network.err_out
        </p>
      </div>
    </div>
    <!-- Interface Table Controls -->
    <div class="flex justify-between items-center mb-3">
      <input type="text" id="filter-interface" placeholder="Filter interfaces…"
        class="text-sm px-3 py-1 rounded border dark:bg-gray-900 border-gray-300 dark:border-gray-700" />
      <button id="export-csv" class="text-sm px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">
        ⬇ Export CSV
      </button>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table id="interface-table" class="min-w-full text-sm table-auto border-collapse">
        <thead class="bg-gray-100 dark:bg-gray-700 text-left cursor-pointer">
          <tr>
            <th class="px-4 py-2">Interface</th>
            <th class="px-4 py-2">Upload</th>
            <th class="px-4 py-2">Download</th>
            <th class="px-4 py-2">Packets Sent</th>
            <th class="px-4 py-2">Packets Received</th>
            <th class="px-4 py-2">Errors In</th>
            <th class="px-4 py-2">Errors Out</th>
          </tr>
        </thead>
        <tbody id="interface-table-body" class="divide-y divide-gray-200 dark:divide-gray-700">
          <tr>
            <td class="px-4 py-2 font-medium text-blue-500">eth0</td>
            <td class="px-4 py-2">1.8 GB</td>
            <td class="px-4 py-2">2.3 GB</td>
            <td class="px-4 py-2">18,430</td>
            <td class="px-4 py-2">21,917</td>
            <td class="px-4 py-2 text-red-600 dark:text-red-400">5</td>
            <td class="px-4 py-2 text-red-600 dark:text-red-400">2</td>
          </tr>
          <tr>
            <td class="px-4 py-2 font-medium text-blue-500">wlan0</td>
            <td class="px-4 py-2">745 MB</td>
            <td class="px-4 py-2">1.1 GB</td>
            <td class="px-4 py-2">7,893</td>
            <td class="px-4 py-2">8,120</td>
            <td class="px-4 py-2 text-green-600 dark:text-green-400">0</td>
            <td class="px-4 py-2 text-green-600 dark:text-green-400">0</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

{{ end }} {{ define "host-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="host" role="tabpanel" aria-labelledby="host-tab">
  <p class="text-gray-600 dark:text-gray-300">Host Info tab coming soon.</p>
</div>
{{end}} {{ define "activity-tab" }}
<div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="activity" role="tabpanel"
  aria-labelledby="activity-tab">
  <div class="max-h-96 overflow-y-auto space-y-3 text-sm">
    <div class="flex items-start space-x-3">
      <span class="text-green-500">●</span>
      <div>
        <p class="text-gray-700 dark:text-gray-300">
          Agent <strong>deepthought</strong> connected securely.
        </p>
        <p class="text-xs text-gray-400">2m ago</p>
      </div>
    </div>
    <div class="flex items-start space-x-3">
      <span class="text-blue-500">ℹ️</span>
      <div>
        <p class="text-gray-700 dark:text-gray-300">
          Container <strong>nginx-web</strong> restarted successfully.
        </p>
        <p class="text-xs text-gray-400">4m ago</p>
      </div>
    </div>
    <div class="flex items-start space-x-3">
      <span class="text-yellow-400">⚠️</span>
      <div>
        <p class="text-gray-700 dark:text-gray-300">
          High memory usage alert triggered.
        </p>
        <p class="text-xs text-gray-400">8m ago</p>
      </div>
    </div>
    <div class="flex items-start space-x-3">
      <span class="text-red-500">🚨</span>
      <div>
        <p class="text-gray-700 dark:text-gray-300">
          Disk space on <strong>/dev/sda1</strong> exceeded 95%.
        </p>
        <p class="text-xs text-gray-400">12m ago</p>
      </div>
    </div>
  </div>
</div>
{{ end }}{{ define "console-tab" }}
<!-- Console Tab Panel -->
<div class="hidden p-4 bg-gray-50 dark:bg-gray-800" id="console" role="tabpanel" aria-labelledby="console-tab">
  <div
    class="bg-black text-green-400 font-mono text-sm leading-relaxed whitespace-pre-wrap border border-gray-700 dark:border-gray-600 shadow-inner p-4 overflow-y-auto h-96 rounded-md">
    top - 14:22:42 up 3 days, 4:17, 2 users, load average: 0.36, 0.28, 0.25
    Tasks: 223 total, 1 running, 222 sleeping, 0 stopped, 0 zombie %Cpu(s):
    3.3 us, 1.1 sy, 0.0 ni, 94.8 id, 0.3 wa, 0.0 hi, 0.5 si, 0.0 st KiB Mem :
    32782644 total, 12345678 used, 20436966 free, 2345676 buffers

    <span class="text-blue-400">user</span>@<span class="text-purple-400">hostname123</span>:<span
      class="text-red-400">~</span>$
    <span id="console-input" class="text-cyan-400 animate-pulse">_</span>
  </div>
</div>

{{ end }} {{ define "page-scripts" }}

<script>
  const charts = {};
  const chartAnimation = {
    tension: {
      duration: 1000,
      easing: "easeOutQuart",
      from: 0.4,
      to: 0,
      loop: false,
    },
  };

  const tooltipPlugin = {
    enabled: true,
    callbacks: {
      label: function (context) {
        return `${context.dataset.label || ""}: ${context.parsed.y}`;
      },
    },
  };
  const renderCpuCharts = () => {
    console.log("🔧 renderCpuCharts() called");

    charts.cpuUsageChart = new Chart(
      document.getElementById("cpuUsageChart"),
      {
        type: "line",
        data: {
          labels: [
            "10m",
            "9m",
            "8m",
            "7m",
            "6m",
            "5m",
            "4m",
            "3m",
            "2m",
            "1m",
          ],
          datasets: [
            {
              label: "CPU Usage %",
              data: [20, 23, 21, 25, 28, 26, 30, 27, 24, 22],
              borderColor: "#3b82f6",
              backgroundColor: "rgba(59, 130, 246, 0.1)",
              fill: true,
              tension: 0.3,
              pointRadius: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: (val) => val + "%",
              },
            },
          },
          plugins: {
            legend: {
              labels: { color: "#4B5563" },
            },
            tooltip: {
              callbacks: {
                label: function (ctx) {
                  return `${ctx.dataset.label}: ${ctx.parsed.y}%`;
                },
              },
            },
          },
          animations: {
            tension: {
              duration: 1000,
              easing: "easeInOutQuart",
              from: 0.3,
              to: 0,
              loop: false,
            },
          },
        },
      }
    );
    charts.cpuLoadChart = new Chart(
      document.getElementById("cpuLoadChart"),
      {
        type: "line",
        data: {
          labels: [
            "10m", "9m", "8m", "7m", "6m",
            "5m", "4m", "3m", "2m", "1m"
          ],
          datasets: [
            {
              label: "CPU Load Avg",
              data: [0.45, 0.50, 0.65, 0.60, 0.75, 0.90, 1.00, 0.80, 0.70, 0.60],
              borderColor: "#10b981", // teal-500
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              fill: true,
              tension: 0.3,
              pointRadius: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              suggestedMax: 2.0, // assuming 1 core or more
              title: {
                display: true,
                text: "Load",
                color: "#6B7280",
              },
              ticks: {
                color: "#6B7280",
              },
            },
            x: {
              ticks: {
                color: "#6B7280",
              },
            },
          },
          plugins: {
            legend: {
              labels: { color: "#4B5563" },
            },
            tooltip: {
              callbacks: {
                label: function (ctx) {
                  return `${ctx.dataset.label}: ${ctx.parsed.y.toFixed(2)}`;
                },
              },
            },
          },
          animations: {
            tension: {
              duration: 1000,
              easing: "easeInOutQuart",
              from: 0.3,
              to: 0,
              loop: false,
            },
          },
        },
      }
    );


    charts.cpuDonutChart = new Chart(document.getElementById("cpuDonutChart"), {
      type: "doughnut",
      data: {
        labels: ["User", "System", "Idle", "Nice"],
        datasets: [
          {
            data: [20, 10, 60, 10],
            backgroundColor: [
              "#3b82f6", // User - blue-500
              "#10b981", // System - green-500
              "#9ca3af", // Idle - gray-400
              "#f59e0b", // Nice - amber-500
            ],
            borderWidth: 2,
            borderColor: "#ffffff",
            hoverOffset: 10,
          },
        ],
      },
      options: {
        cutout: "70%",
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: "bottom",
            labels: {
              color: "#6B7280", // gray-500
              boxWidth: 14,
              font: { size: 12, weight: "500" },
            },
          },
          tooltip: {
            callbacks: {
              label: function (ctx) {
                return `${ctx.label}: ${ctx.parsed}%`;
              },
            },
          },
        },
      },
    });
    setInterval(() => {
      if (!charts.cpuUsageChart) return;

      const nextVal = Math.random() * 100;
      const nextLabel = `${charts.cpuUsageChart.data.labels.length + 1}m`;

      console.log(
        `📊 Adding new CPU point: ${nextVal.toFixed(1)}% at ${nextLabel}`
      );

      charts.cpuUsageChart.data.datasets[0].data.push(nextVal);
      charts.cpuUsageChart.data.labels.push(nextLabel);

      if (charts.cpuUsageChart.data.labels.length > 60) {
        charts.cpuUsageChart.data.datasets[0].data.shift();
        charts.cpuUsageChart.data.labels.shift();
      }

      charts.cpuUsageChart.update();
    }, 2000);
    setInterval(() => {
      if (!charts.cpuLoadChart) return;

      // Simulate a new CPU load average between 0.4 and 2.0
      const nextVal = (Math.random() * 1.6 + 0.4).toFixed(2);
      const nextLabel = `${charts.cpuLoadChart.data.labels.length + 1}m`;

      console.log(`📈 Adding new CPU Load point: ${nextVal} at ${nextLabel}`);

      charts.cpuLoadChart.data.datasets[0].data.push(parseFloat(nextVal));
      charts.cpuLoadChart.data.labels.push(nextLabel);

      // Keep last 60 points
      if (charts.cpuLoadChart.data.labels.length > 60) {
        charts.cpuLoadChart.data.datasets[0].data.shift();
        charts.cpuLoadChart.data.labels.shift();
      }

      charts.cpuLoadChart.update();
    }, 2000);
  };

  const renderMemoryCharts = () => {
    if (charts.memoryUsageChart) return;

    charts.memoryUsageChart = new Chart(
      document.getElementById("memoryUsageChart"),
      {
        type: "line",
        data: {
          labels: [
            "10m",
            "9m",
            "8m",
            "7m",
            "6m",
            "5m",
            "4m",
            "3m",
            "2m",
            "1m",
          ],
          datasets: [
            {
              label: "Memory Used (GB)",
              data: [
                11.5, 11.7, 12.0, 12.2, 12.4, 12.3, 12.1, 12.3, 12.4, 12.4,
              ],
              borderColor: "#10b981",
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              fill: true,
              tension: 0.3,
              pointRadius: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: {
            duration: 800,
            easing: "easeOutExpo",
            animateScale: true,
            animateRotate: false,
          },
          scales: {
            y: {
              beginAtZero: false,
              ticks: {
                callback: (val) => val + " GB",
              },
            },
          },
          plugins: {
            legend: {
              labels: { color: "#4B5563" },
            },
            tooltip: {
              callbacks: {
                label: function (ctx) {
                  return `${ctx.dataset.label}: ${ctx.parsed.y} GB`;
                },
              },
            },
          },
        },
      }
    );

    charts.memoryDonutChart = new Chart(
      document.getElementById("memoryDonutChart"),
      {
        type: "doughnut",
        data: {
          labels: ["Used", "Free", "Buffers", "Cache"],
          datasets: [
            {
              label: "Memory Distribution",
              data: [12.4, 17.9, 0.8, 0.9],
              backgroundColor: ["#10b981", "#3b82f6", "#f59e0b", "#f87171"],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: "bottom",
              labels: { color: "#4B5563" },
            },
          },
        },
      }
    );
    setInterval(() => {
      const nextVal = (11 + Math.random() * 2).toFixed(1);
      charts.memoryUsageChart.data.datasets[0].data.push(parseFloat(nextVal));
      charts.memoryUsageChart.data.labels.push(
        `${charts.memoryUsageChart.data.labels.length + 1}m`
      );
      charts.memoryUsageChart.update();
    }, 2500);
  };

  const renderMiniCharts = () => {
    new Chart(document.getElementById("miniCpuChart"), {
      type: "line",
      data: {
        labels: ["1m", "2m", "3m", "4m", "5m"],
        datasets: [
          {
            data: [12, 18, 14, 20, 17],
            borderColor: "#3b82f6",
            backgroundColor: "rgba(59, 130, 246, 0.1)",
            tension: 0.4,
            fill: true,
            pointRadius: 0,
          },
        ],
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: tooltipPlugin,
        },
        scales: { y: { display: true }, x: { display: true } },
        elements: { line: { borderWidth: 2 } },
        animations: chartAnimation,
      },
    });

    new Chart(document.getElementById("miniMemoryChart"), {
      type: "line",
      data: {
        labels: ["1m", "2m", "3m", "4m", "5m"],
        datasets: [
          {
            data: [6.2, 6.3, 6.1, 6.4, 6.6],
            borderColor: "#10b981",
            backgroundColor: "rgba(16, 185, 129, 0.1)",
            tension: 0.4,
            fill: true,
            pointRadius: 0,
          },
        ],
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: tooltipPlugin,
        },
        scales: { y: { display: true }, x: { display: true } },
        elements: { line: { borderWidth: 2 } },
        animations: chartAnimation,
      },
    });

    new Chart(document.getElementById("miniDiskChart"), {
      type: "line",
      data: {
        labels: ["1m", "2m", "3m", "4m", "5m"],
        datasets: [
          {
            data: [110, 135, 90, 120, 140],
            borderColor: "#f59e0b",
            backgroundColor: "rgba(245, 158, 11, 0.1)",
            tension: 0.4,
            fill: true,
            pointRadius: 0,
          },
        ],
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: tooltipPlugin,
        },
        scales: { y: { display: true }, x: { display: true } },
        elements: { line: { borderWidth: 2 } },
        animations: chartAnimation,
      },
    });
  };
  document.addEventListener("DOMContentLoaded", function () {
    console.log("📦 DOMContentLoaded triggered");

    renderMiniCharts(); // always render mini charts
    renderCpuCharts(); // optional preload
    renderMemoryCharts(); // optional preload

    // Flowbite manual init in case tabs are not registering
    window.Flowbite?.initTabs?.();

    console.log("✅ DOM ready. Tabs initialized.");
  });

  document.addEventListener("shown.tw.tab", function (event) {
    const target = event.target;
    console.log("🔁 Tab switch triggered:", target?.id);

    if (target?.id === "cpu-tab") {
      console.log("⚙️ Switching to CPU tab...");
      renderCpuCharts();
    } else if (target?.id === "memory-tab") {
      console.log("⚙️ Switching to Memory tab...");
      renderMemoryCharts();
    }
  });
</script>
<script>
  const themeToggleBtn = document.getElementById("theme-toggle");
  const lightIcon = document.getElementById("theme-toggle-light-icon");
  const darkIcon = document.getElementById("theme-toggle-dark-icon");

  // Load stored theme
  if (
    localStorage.getItem("color-theme") === "dark" ||
    (!localStorage.getItem("color-theme") &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
    lightIcon.classList.remove("hidden");
  } else {
    document.documentElement.classList.remove("dark");
    darkIcon.classList.remove("hidden");
  }

  themeToggleBtn?.addEventListener("click", function () {
    lightIcon.classList.toggle("hidden");
    darkIcon.classList.toggle("hidden");

    // Toggle and store
    if (document.documentElement.classList.contains("dark")) {
      document.documentElement.classList.remove("dark");
      localStorage.setItem("color-theme", "light");
    } else {
      document.documentElement.classList.add("dark");
      localStorage.setItem("color-theme", "dark");
    }
  });
</script>
<script>
  const inputEl = document.getElementById("console-input");
  const fakeCommand = "uptime";
  let idx = 0;

  const typeCommand = () => {
    if (idx < fakeCommand.length) {
      inputEl.classList.remove("animate-pulse");
      inputEl.innerText = fakeCommand.slice(0, idx + 1);
      idx++;
      setTimeout(typeCommand, 120);
    } else {
      inputEl.classList.add("animate-pulse");
    }
  };

  // Trigger typing after a short delay
  setTimeout(typeCommand, 1000);
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const ctx = document.getElementById("networkChart").getContext("2d");
    new Chart(ctx, {
      type: "line",
      data: {
        labels: ["10m", "9m", "8m", "7m", "6m", "5m", "4m", "3m", "2m", "1m"],
        datasets: [
          {
            label: "Bytes Sent",
            data: [100, 120, 150, 170, 130, 180, 160, 190, 200, 210],
            borderColor: "#3b82f6",
            backgroundColor: "rgba(59, 130, 246, 0.1)",
            fill: true,
            tension: 0.3,
            pointRadius: 2,
          },
          {
            label: "Bytes Received",
            data: [80, 90, 140, 160, 120, 170, 150, 180, 190, 220],
            borderColor: "#10b981",
            backgroundColor: "rgba(16, 185, 129, 0.1)",
            fill: true,
            tension: 0.3,
            pointRadius: 2,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: (val) => `${val} KB`,
            },
          },
        },
        plugins: {
          legend: { labels: { color: "#4B5563" } },
          tooltip: {
            callbacks: {
              label: (ctx) => `${ctx.dataset.label}: ${ctx.parsed.y} KB`,
            },
          },
        },
      },
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const ctx = document.getElementById("networkChart").getContext("2d");
    new Chart(ctx, {
      type: "line",
      data: {
        labels: ["10m", "9m", "8m", "7m", "6m", "5m", "4m", "3m", "2m", "1m"],
        datasets: [
          {
            label: "Upload (Mbps)",
            data: [4.2, 5.3, 6.7, 7.8, 9.1, 10.2, 11.4, 12.2, 11.9, 12.4],
            borderColor: "#3b82f6",
            backgroundColor: "rgba(59, 130, 246, 0.1)",
            fill: true,
            tension: 0.4,
            pointRadius: 2,
          },
          {
            label: "Download (Mbps)",
            data: [3.6, 4.1, 5.2, 6.0, 7.3, 8.4, 9.7, 9.9, 10.1, 10.2],
            borderColor: "#10b981",
            backgroundColor: "rgba(16, 185, 129, 0.1)",
            fill: true,
            tension: 0.4,
            pointRadius: 2,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: (val) => `${val} Mbps`,
            },
          },
        },
        plugins: {
          legend: {
            labels: { color: "#4B5563" },
          },
          tooltip: {
            callbacks: {
              title: (ctx) => {
                const index = ctx[0].dataIndex;
                const now = new Date();
                const minutesAgo = 10 - index;
                const ts = new Date(now.getTime() - minutesAgo * 60 * 1000);
                return ts.toLocaleTimeString([], {
                  hour: "2-digit",
                  minute: "2-digit",
                });
              },
              label: (ctx) => `${ctx.dataset.label}: ${ctx.parsed.y} Mbps`,
            },
          },
        },
      },
    });
  });
</script>
<script>
  // Chart unit toggle logic
  document.getElementById("chart-unit").addEventListener("change", (e) => {
    const unit = e.target.value;
    const labels = {
      mbps: "Mbps",
      kbps: "KBps",
      bytes: "Bytes/sec",
    };
    const multiplier = {
      mbps: 1,
      kbps: 1000,
      bytes: 1000000,
    };

    const chart = Chart.getChart("networkChart");
    chart.data.datasets.forEach((ds) => {
      ds.label = ds.label.includes("Upload")
        ? `Upload (${labels[unit]})`
        : `Download (${labels[unit]})`;
      ds.data = ds.data.map((val) =>
        unit === "mbps"
          ? val
          : unit === "kbps"
            ? (val * 1000).toFixed(1)
            : (val * 1000000).toFixed(0)
      );
    });
    chart.options.scales.y.ticks.callback = (val) => `${val} ${labels[unit]}`;
    chart.update();
  });

  // Table filter logic
  document
    .getElementById("filter-interface")
    .addEventListener("input", (e) => {
      const filter = e.target.value.toLowerCase();
      const rows = document.querySelectorAll("#interface-table-body tr");
      rows.forEach((row) => {
        row.style.display = row.innerText.toLowerCase().includes(filter)
          ? ""
          : "none";
      });
    });

  // Export CSV logic
  document.getElementById("export-csv").addEventListener("click", () => {
    const rows = document.querySelectorAll("#interface-table tr");
    const csv = Array.from(rows)
      .map((row) =>
        Array.from(row.querySelectorAll("td,th"))
          .map((cell) => `"${cell.innerText.trim()}"`)
          .join(",")
      )
      .join("\n");

    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);

    const link = document.createElement("a");
    link.download = "network_interfaces.csv";
    link.href = url;
    link.click();

    URL.revokeObjectURL(url);
  });
</script>
{{ end }}
</div>