<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>GoSight Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/css/output.css" />
    <!-- Flowbite CSS (optional if you're using Tailwind CDN only) -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css"
      rel="stylesheet"
    />

    <!-- Flowbite JS (required for dropdowns, modals, etc.) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

    <!-- Optional: Popper.js for dropdowns/tooltips -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
  </head>

  <body
    class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white font-sans antialiased"
  >
    <!-- Environment banner -->
    <div
      class="bg-yellow-100 text-yellow-800 px-4 py-2 text-xs font-semibold text-center"
    >
      ‚ö†Ô∏è You are viewing a DEV mockup environment ‚Äî metrics are simulated
    </div>

    <!-- Alert message -->
    <div
      class="bg-red-100 text-red-800 border border-red-300 px-4 py-3 text-sm text-center"
    >
      üö® Alert: Disk usage on <strong>DeepThought</strong> exceeds 85%
    </div>
    <!-- Main full width container (left bar / right content)-->
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside
        class="w-64 bg-gray-900 text-gray-100 p-6 flex flex-col justify-between border-r border-gray-800"
      >
        <div>
          <!-- Logo/Header -->
          <div class="flex items-center justify-between mb-10">
            <h1 class="text-xl font-bold text-blue-400 tracking-wide">
              GoSight
            </h1>
            <span
              class="text-xs bg-gray-800 text-gray-300 font-semibold px-2 py-1 rounded"
              >DEV</span
            >
          </div>

          <!-- Nav -->
          <nav class="space-y-2 text-sm" id="sidebar-nav">
            <a
              href="/"
              class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg
                class="w-5 h-5 text-gray-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 9.75L12 4.5l9 5.25M4.5 10.5v7.5a1.5 1.5 0 001.5 1.5H9v-4.5h6V19.5h3a1.5 1.5 0 001.5-1.5v-7.5"
                />
              </svg>
              Dashboard
            </a>

            <a
              href="/metrics"
              class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg
                class="w-5 h-5 text-gray-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M11 3v18m4-14v14m4-10v10m-12 4v-6m-4 2v4"
                />
              </svg>
              Metrics
            </a>

            <a
              href="/agents"
              class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg
                class="w-5 h-5 text-gray-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M5.121 17.804A13.944 13.944 0 0112 15c2.136 0 4.153.502 5.879 1.388M15 10a3 3 0 11-6 0 3 3 0 016 0z"
                />
              </svg>
              Agents
            </a>

            <a
              href="/endpoints"
              class="flex items-center px-3 py-2 rounded-lg bg-gray-800 text-white transition"
            >
              <svg
                class="w-5 h-5 text-blue-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
              Endpoints
            </a>

            <a
              href="/logs"
              class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg
                class="w-5 h-5 text-gray-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4 4h16v16H4z"
                />
              </svg>
              Logs
            </a>

            <a
              href="/config"
              class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg
                class="w-5 h-5 text-gray-400 mr-3"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                />
              </svg>
              Config
            </a>
          </nav>
        </div>

        <!-- Footer -->
        <div class="text-gray-500 text-xs mt-6">
          <p class="text-gray-400">
            Version: <span class="text-white font-semibold">1.0.0</span>
          </p>
        </div>
      </aside>

      <!-- Main content -->
      <div class="flex-1 flex flex-col">
        <!-- Top Nav -->
        <header class="w-full px-6 py-3 z-50" <!----BREADCRUMBS -->
          <div class="flex items-center justify-between">
            <nav class="flex" aria-label="Breadcrumb">
              <ol class="inline-flex items-center space-x-1 md:space-x-2">
                <li class="inline-flex items-center">
                  <a
                    href="#"
                    class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"
                  >
                    <svg
                      class="w-3 h-3 mr-2.5"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"
                      />
                    </svg>
                    Home
                  </a>
                </li>
                <li>
                  <div class="flex items-center">
                    <svg
                      class="w-3 h-3 text-gray-400 mx-1"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 6 10"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="m1 9 4-4-4-4"
                      />
                    </svg>
                    <a
                      href="#"
                      class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2 dark:text-gray-400 dark:hover:text-white"
                      >Endpoints</a
                    >
                  </div>
                </li>
                <li aria-current="page">
                  <div class="flex items-center">
                    <svg
                      class="w-3 h-3 text-gray-400 mx-1"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 6 10"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="m1 9 4-4-4-4"
                      />
                    </svg>
                    <span
                      class="ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"
                      >Endpoint Overview</span
                    >
                  </div>
                </li>
              </ol>
            </nav>
            <div class="flex items-center space-x-4">
              <!-- Global Search -->

              {{ define "search-form" }}
              <div class="relative w-64">
                <input
                  type="text"
                  id="global-search"
                  placeholder="Search agents, containers, logs..."
                  class="w-full px-3 py-2 text-sm border rounded-md dark:bg-gray-900 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <ul
                  id="search-results"
                  class="absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 text-sm rounded-md shadow-md border border-gray-200 dark:border-gray-700 hidden max-h-60 overflow-y-auto"
                >
                  <!-- Populated by JS -->
                </ul>
              </div>
              {{ end }} {{ template "search-form" . }}
              <!-- Dark Mode Toggle -->
              <!-- Theme Toggle -->
              <button
                id="theme-toggle"
                type="button"
                class="text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white focus:outline-none text-lg"
              >
                <span id="theme-toggle-light-icon" class="hidden">
                  <!-- Sun Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M6.05 17.95l-1.414 1.414M17.95 17.95l1.414 1.414M6.05 6.05L4.636 4.636M12 8a4 4 0 100 8 4 4 0 000-8z"
                    />
                  </svg>
                </span>

                <span id="theme-toggle-dark-icon" class="hidden">
                  <!-- Moon Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"
                    />
                  </svg>
                </span>
              </button>

              <!-- User Dropdown (Flowbite) -->
              <button
                id="dropdownUserAvatarButton"
                data-dropdown-toggle="dropdownUserAvatar"
                class="w-11 h-11 rounded-full shadow-md object-cover"
                type="button"
              >
                <img
                  class="w-11 h-11 rounded-full object-cover"
                  src="https://media.licdn.com/dms/image/v2/D5603AQE1pgfPkObY8w/profile-displayphoto-shrink_100_100/B56ZRr4qcDHsAU-/0/1736976804537?e=1749686400&v=beta&t=cIew9AT-j-UZnW_QUp9-e4SGRd3-6Utl--hKwIfLsOo"
                  alt="User avatar"
                />
              </button>

              <!-- Dropdown menu -->
              <div
                id="dropdownUserAvatar"
                class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-800 dark:divide-gray-700 w-48"
              >
                <div class="px-4 py-3">
                  <span class="block text-sm text-gray-900 dark:text-white"
                    >Aaron Mathis</span
                  >
                  <span
                    class="block text-sm text-gray-500 truncate dark:text-gray-400"
                    >amathis@gosight.dev</span
                  >
                </div>
                <ul class="py-2" aria-labelledby="dropdownUserAvatarButton">
                  <li>
                    <a
                      href="/profile"
                      class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"
                      >Profile</a
                    >
                  </li>
                  <li>
                    <a
                      href="/settings"
                      class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"
                      >Settings</a
                    >
                  </li>
                  <li>
                    <a
                      href="/logout"
                      class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-gray-700"
                      >Sign out</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </header>
        <!--- End BREADCRUMBS    -->

        <!-- Page Content -->
        <main class="flex-1 p-6 w-full pt-0">
          {{ block "content" . }}{{ end }}
        </main>
      </div>
    </div>
    {{ define "search-scripts"}}
    <script>
      const mockData = {
        Agents: ["deepthought", "hal9000", "marvin"],
        Hosts: ["prod-host-01", "db-server", "k8s-node-2"],
        Containers: ["nginx-proxy", "web-app", "postgres-db"],
        Logs: ["syslog", "app.log", "error.log"],
        Metrics: ["cpu.usage", "mem.free", "container.uptime"],
      };

      const input = document.getElementById("global-search");
      const results = document.getElementById("search-results");

      input.addEventListener("input", () => {
        const term = input.value.toLowerCase().trim();
        results.innerHTML = "";

        if (!term) {
          results.classList.add("hidden");
          return;
        }

        let found = false;
        for (const [section, items] of Object.entries(mockData)) {
          const matches = items.filter((i) => i.toLowerCase().includes(term));
          if (matches.length > 0) {
            found = true;
            const sectionHeader = document.createElement("li");
            sectionHeader.className =
              "px-3 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400";
            sectionHeader.textContent = section;
            results.appendChild(sectionHeader);

            matches.forEach((match) => {
              const item = document.createElement("li");
              item.className =
                "px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer";
              item.textContent = match;
              results.appendChild(item);
            });
          }
        }

        results.classList.toggle("hidden", !found);
      });

      document.addEventListener("click", (e) => {
        if (!input.contains(e.target) && !results.contains(e.target)) {
          results.classList.add("hidden");
        }
      });
    </script>
    {{ end }} {{ block "scripts" . }}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/flowbite@1.7.0/dist/flowbite.min.js"></script>
    {{ template "search-scripts" . }} {{ template "page-scripts" . }} {{ end }}
  </body>
</html>
